<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <link rel="stylesheet" href="./css/explore.css">
   <link rel="stylesheet" href="./css/popup.css">
   <link rel="stylesheet" href="./css/">
   <link rel="stylesheet" href="./styles/footer.css">
</head>
<body>
    <div id="explorenavbar" style="height: 50px; margin-bottom: 50px;">
		<div id="logodiv" >
			<a href="index.html">
				<img id="logo" src="https://playo-website.gumlet.io/playo-website-v2/Logo+with+Trademark_Filled.png" alt="playo logo" style="margin-top: -2px;">
			  </a>
		</div>

    </div>



<!--    popupwindow      ------------------------------------------------------ -->
<div id="show">
    <!--popupwindow show here  -->
</div>
</div>

<!--  -->
        <div id="searchbar" style="margin-bottom: 25px;">
            <input type="text" id="typesearch" placeholder="Type a city"  style="border: 1px solid grey; border-top-left-radius: 2px; border-top-right-radius: 2px;" >
            <button id="searchbtn" >Detect</button>
        </div>

     <div id="citynames" style="margin-bottom: 110px; border: 1px solid rgb(214, 212, 212); padding: 20px; box-sizing: border-box; border-radius: 2px; color: #424242;">
     <p>All citiies</p>
     <hr>
        
     </div>

	 <div id="footer"></div>


</body>
</html>
<script type="module">
	import getpopup from "./components/popup.js"
	document.getElementById("show").innerHTML=getpopup();

	import footer from "./components/footer.js"
	let container = document.querySelector("#footer");
	container.innerHTML = footer();


var  city_names=['Adilabad',
			'Anantapur',
			'Chittoor',
			'Kakinada',
			'Guntur',
			'Hyderabad',
			'Karimnagar',
			'Khammam',
			'Krishna',
			'Kurnool',
			'Mahbubnagar',
			'Medak',
			'Nalgonda',
			'Nizamabad',
			'Ongole',
			'Hyderabad',
			'Srikakulam',
			'Nellore',
			'Visakhapatnam',
			'Vizianagaram',
			'Warangal',
			'Eluru',
			'Kadapa','Anjaw',
			'Changlang',
			'East Siang',
			'Kurung Kumey',
			'Lohit',
			'Lower Dibang Valley',
			'Lower Subansiri',
			'Papum Pare',
			'Tawang',
			'Tirap',
			'Dibang Valley',
			'Upper Siang',
			'Upper Subansiri',
			'West Kameng',
			'West Siang','Baksa',
			'Barpeta',
			'Bongaigaon',
			'Cachar',
			'Chirang',
			'Darrang',
			'Dhemaji',
			'Dima Hasao',
			'Dhubri',
			'Dibrugarh',
			'Goalpara',
			'Golaghat',
			'Hailakandi',
			'Jorhat',
			'Kamrup',
			'Kamrup Metropolitan',
			'Karbi Anglong',
			'Karimganj',
			'Kokrajhar',
			'Lakhimpur',
			'Marigaon',
			'Nagaon',
			'Nalbari',
			'Sibsagar',
			'Sonitpur',
			'Tinsukia',
			'Udalguri',
			'Araria',
			'Arwal',
			'Aurangabad',
			'Banka',
			'Begusarai',
			'Bhagalpur',
			'Bhojpur',
			'Buxar',
			'Darbhanga',
			'East Champaran',
			'Gaya',
			'Gopalganj',
			'Jamui',
			'Jehanabad',
			'Kaimur',
			'Katihar',
			'Khagaria',
			'Kishanganj',
			'Lakhisarai',
			'Madhepura',
			'Madhubani',
			'Munger',
			'Muzaffarpur',
			'Nalanda',
			'Nawada',
			'Patna',
			'Purnia',
			'Rohtas',
			'Saharsa',
			'Samastipur',
			'Saran',
			'Sheikhpura',
			'Sheohar',
			'Sitamarhi',
			'Siwan',
			'Supaul',
			'Vaishali',
			'West Champaran',
			'Chandigarh','Bastar',
			'Bijapur',
			'Bilaspur',
			'Dantewada',
			'Dhamtari',
			'Durg',
			'Jashpur',
			'Janjgir-Champa',
			'Korba',
			'Koriya',
			'Kanker',
			'Kabirdham (Kawardha)',
			'Mahasamund',
			'Narayanpur',
			'Raigarh',
			'Rajnandgaon',
			'Raipur',
			'Surguja','Dadra and Nagar Haveli',
      'New Delhi','Ahmedabad',
			'Amreli district',
			'Anand',
			'Banaskantha',
			'Bharuch',
			'Bhavnagar',
			'Dahod',
			'The Dangs',
			'Gandhinagar',
			'Jamnagar',
			'Junagadh',
			'Kutch',
			'Kheda',
			'Mehsana',
			'Narmada',
			'Navsari',
			'Patan',
			'Panchmahal',
			'Porbandar',
			'Rajkot',
			'Sabarkantha',
			'Surendranagar',
			'Surat',
			'Vyara',
			'Vadodara',
			'Valsad','Ambala',
			'Bhiwani',
			'Faridabad',
			'Fatehabad',
			'Gurgaon',
			'Hissar',
			'Jhajjar',
			'Jind',
			'Karnal',
			'Kaithal',
			'Kurukshetra',
			'Mahendragarh',
			'Mewat',
			'Palwal',
			'Panchkula',
			'Panipat',
			'Rewari',
			'Rohtak',
			'Sirsa',
			'Sonipat',
			'Yamuna Nagar','Bilaspur',
			'Chamba',
			'Hamirpur',
			'Kangra',
			'Kinnaur',
			'Kullu',
			'Lahaul and Spiti',
			'Mandi',
			'Shimla',
			'Sirmaur',
			'Solan',
			'Una','Anantnag',
			'Badgam',
			'Bandipora',
			'Baramulla',
			'Doda',
			'Ganderbal',
			'Jammu',
			'Kargil',
			'Kathua',
			'Kishtwar',
			'Kupwara',
			'Kulgam',
			'Leh',
			'Poonch',
			'Pulwama',
			'Rajauri',
			'Ramban',
			'Reasi',
			'Samba',
			'Shopian',
			'Srinagar',
			'Udhampur','Bokaro',
			'Chatra',
			'Deoghar',
			'Dhanbad',
			'Dumka',
			'East Singhbhum',
			'Garhwa',
			'Giridih',
			'Godda',
			'Gumla',
			'Hazaribag',
			'Jamtara',
			'Khunti',
			'Koderma',
			'Latehar',
			'Lohardaga',
			'Pakur',
			'Palamu',
			'Ramgarh',
			'Ranchi',
			'Sahibganj',
			'Seraikela Kharsawan',
			'Simdega',
			'West Singhbhum','Bagalkot',
			'Bangalore Rural',
			'Bangalore Urban',
			'Belgaum',
			'Bellary',
			'Bidar',
			'Bijapur',
			'Chamarajnagar',
			'Chikkamagaluru',
			'Chikkaballapur',
			'Chitradurga',
			'Davanagere',
			'Dharwad',
			'Dakshina Kannada',
			'Gadag',
			'Gulbarga',
			'Hassan',
			'Haveri district',
			'Kodagu',
			'Kolar',
			'Koppal',
			'Mandya',
			'Mysore',
			'Raichur',
			'Shimoga',
			'Tumkur',
			'Udupi',
			'Uttara Kannada',
			'Ramanagara',
			'Yadgir','Alappuzha',
			'Ernakulam',
			'Idukki',
			'Kannur',
			'Kasaragod',
			'Kollam',
			'Kottayam',
			'Kozhikode',
			'Malappuram',
			'Palakkad',
			'Pathanamthitta',
			'Thrissur',
			'Thiruvananthapuram',
			'Wayanad','Alirajpur',
			'Anuppur',
			'Ashok Nagar',
			'Balaghat',
			'Barwani',
			'Betul',
			'Bhind',
			'Bhopal',
			'Burhanpur',
			'Chhatarpur',
			'Chhindwara',
			'Damoh',
			'Datia',
			'Dewas',
			'Dhar',
			'Dindori',
			'Guna',
			'Gwalior',
			'Harda',
			'Hoshangabad',
			'Indore',
			'Jabalpur',
			'Jhabua',
			'Katni',
			'Khandwa (East Nimar)',
			'Khargone (West Nimar)',
			'Mandla',
			'Mandsaur',
			'Morena',
			'Narsinghpur',
			'Neemuch',
			'Panna',
			'Rewa',
			'Rajgarh',
			'Ratlam',
			'Raisen',
			'Sagar',
			'Satna',
			'Sehore',
			'Seoni',
			'Shahdol',
			'Shajapur',
			'Sheopur',
			'Shivpuri',
			'Sidhi',
			'Singrauli',
			'Tikamgarh',
			'Ujjain',
			'Umaria',
			'Vidisha','Ahmednagar',
			'Akola',
			'Amravati',
			'Aurangabad',
			'Bhandara',
			'Beed',
			'Buldhana',
			'Chandrapur',
			'Dhule',
			'Gadchiroli',
			'Gondia',
			'Hingoli',
			'Jalgaon',
			'Jalna',
			'Kolhapur',
			'Latur',
			'Mumbai City',
			'Mumbai suburban',
			'Nandurbar',
			'Nanded',
			'Nagpur',
			'Nashik',
			'Osmanabad',
			'Parbhani',
			'Pune',
			'Raigad',
			'Ratnagiri',
			'Sindhudurg',
			'Sangli',
			'Solapur',
			'Satara',
			'Thane',
			'Wardha',
			'Washim',
			'Yavatmal',
			'Amritsar',
			'Barnala',
			'Bathinda',
			'Firozpur',
			'Faridkot',
			'Fatehgarh Sahib',
			'Fazilka',
			'Gurdaspur',
			'Hoshiarpur',
			'Jalandhar',
			'Kapurthala',
			'Ludhiana',
			'Mansa',
			'Moga',
			'Sri Muktsar Sahib',
			'Pathankot',
			'Patiala',
			'Rupnagar',
			'Ajitgarh (Mohali)',
			'Sangrur',
			'Nawanshahr',
			'Tarn Taran','Ajmer',
			'Alwar',
			'Bikaner',
			'Barmer',
			'Banswara',
			'Bharatpur',
			'Baran',
			'Bundi',
			'Bhilwara',
			'Churu',
			'Chittorgarh',
			'Dausa',
			'Dholpur',
			'Dungapur',
			'Ganganagar',
			'Hanumangarh',
			'Jhunjhunu',
			'Jalore',
			'Jodhpur',
			'Jaipur',
			'Jaisalmer',
			'Jhalawar',
			'Karauli',
			'Kota',
			'Nagaur',
			'Pali',
			'Pratapgarh',
			'Rajsamand',
			'Sikar',
			'Sawai Madhopur',
			'Sirohi',
			'Tonk',
			'Udaipur','Agra',
			'Allahabad',
			'Aligarh',
			'Ambedkar Nagar',
			'Auraiya',
			'Azamgarh',
			'Barabanki',
			'Budaun',
			'Bagpat',
			'Bahraich',
			'Bijnor',
			'Ballia',
			'Banda',
			'Balrampur',
			'Bareilly',
			'Basti',
			'Bulandshahr',
			'Chandauli',
			'Chhatrapati Shahuji Maharaj Nagar',
			'Chitrakoot',
			'Deoria',
			'Etah',
			'Kanshi Ram Nagar',
			'Etawah',
			'Firozabad',
			'Farrukhabad',
			'Fatehpur',
			'Faizabad',
			'Gautam Buddh Nagar',
			'Gonda',
			'Ghazipur',
			'Gorakhpur',
			'Ghaziabad',
			'Hamirpur',
			'Hardoi',
			'Mahamaya Nagar',
			'Jhansi',
			'Jalaun',
			'Jyotiba Phule Nagar',
			'Jaunpur district',
			'Ramabai Nagar (Kanpur Dehat)',
			'Kannauj',
			'Kanpur',
			'Kaushambi',
			'Kushinagar',
			'Lalitpur',
			'Lakhimpur Kheri',
			'Lucknow',
			'Mau',
			'Meerut',
			'Maharajganj',
			'Mahoba',
			'Mirzapur',
			'Moradabad',
			'Mainpuri',
			'Mathura',
			'Muzaffarnagar',
			'Panchsheel Nagar district (Hapur)',
			'Pilibhit',
			'Shamli',
			'Pratapgarh',
			'Rampur',
			'Raebareli',
			'Saharanpur',
			'Sitapur',
			'Shahjahanpur',
			'Sant Kabir Nagar',
			'Siddharthnagar',
			'Sonbhadra',
			'Sant Ravidas Nagar',
			'Sultanpur',
			'Shravasti',
			'Unnao',
			'Varanasi','Almora',
			'Bageshwar',
			'Chamoli',
			'Champawat',
			'Dehradun',
			'Haridwar',
			'Nainital',
			'Pauri Garhwal',
			'Pithoragarh',
			'Rudraprayag',
			'Tehri Garhwal',
			'Udham Singh Nagar',
			'Uttarkashi'];
      city_names.sort((a,b)=>a-b);
      //console.log(city_names)

	//   function D_Fun_C(data){
	// 	data.map((({city})=>{
	// 		var showcities=document.querySelector("#citynames");
    //  var p=document.createElement("p");
    //  var line=document.createElement("hr");
    //      p.innerHTML=city;

    //      showcities.append(p,line);
	// 	})
	//   }


	





	// cities list appending here 

     for(var i=0; i<city_names.length; i++){
	var showcities=document.querySelector("#citynames");
     var p=document.createElement("p");
     var line=document.createElement("hr");
         p.innerHTML=city_names[i];
         showcities.append(p,line);
     }

	//  popupstartshere-----------------------
// var modal = document.getElementById("myModal");
// var modal1=document.getElementById("myModal1")

// // Get the button that opens the modal
// var btn = document.getElementById("myBtn");
// // btn.innerHTML= JSON.parse(localStorage.getItem("myLocal"))[0]|| "Login/Signup";
// var submit=document.getElementById("btn");
// var verify=document.getElementById("btn2")

// Get the <span> element that closes the modal
// var span = document.getElementsByClassName("close")[0];
// When the user clicks the button, open the modal 
// btn.onclick = function() {
// 	if (btn.innerHTML=="Login/Signup"){
// 		modal.style.display = "block";
// 	}
// 	else{
// 		document.getElementById("dropdowndiv").style.visibility="visible";
// 	}
  

// }



// submit.onclick=function(){
//     var mobnumber=document.querySelector("#mobnum").value;
//     //console.log(mobnumber)
//  if(mobnumber){
//     modal.style.display = "none";
//     modal1.style.display = "block";
//  }
//  else{
//      alert("pls fill no.");
//  }
// }
// verify.onclick = function(event) {
//     event.preventDefault()
//   var data=JSON.parse(localStorage.getItem("myLocal"))
//   console.log(data[0]);
//   btn.innerHTML=data[0]
//   modal.style.display = "none";
//   modal1.style.display = "none";

// }

// // When the user clicks on <span> (x), close the modal
// span.onclick = function() {
//     modal1.style.display = "none";
//   modal.style.display = "none";
 
// }

// // When the user clicks anywhere outside of the modal, close it
// window.onclick = function(event) {
//   if (event.target == modal) {
//     modal.style.display = "none";
    
//   }
// }

// document.getElementById("form").addEventListener("submit",myFn)
// //   var arr=JSON.parse(localStorage.getItem("myLocal"))||[]

// function myFn(event)
// {var arr=[];
// event.preventDefault()
// var myobj=document.querySelector("#mobnum").value;
// arr.push(myobj)
// localStorage.setItem("myLocal",JSON.stringify(arr))
// }

function find() {
    let c= document.getElementById("cities").value
    console.log(c)
    
    let data = {
      city: document.getElementById("typesearch").value,
     
    };

    let location = localStorage.setItem("name", JSON.stringify(data));
    window.location.href = "explore.html";
  }


document.querySelector("#searchbtn").addEventListener("click",()=>{
    let data = {
      city: document.getElementById("typesearch").value,
     
    };

    let location = localStorage.setItem("name", JSON.stringify(data));
    window.location.href = "explore.html";
})










    // debouncing funvtion

document.getElementById("typesearch").addEventListener("keyup",()=>{
	debounce(mainFun);
});

let id;
function debounce(func){
    if(id){
		clearTimeout(id);
	}
   id =	setTimeout(() => {
		func();
	},500)
};


const mainFun = async () => {
	let query1 =  document.getElementById("typesearch").value;
	try{
	let response = await fetch(`http://localhost:3000/City_name?q=${query1}`);
	let data = await response.json();
	console.log(data);
	showDataFun(data);
	}
	catch(err){
		console.log(err);
	}

}

var showcities1=document.querySelector("#citynames");
function showDataFun(data){
	showcities1.innerHTML = "";
	data.forEach(function(elem){
     var p=document.createElement("p");
     var line=document.createElement("hr");
	 p.innerText = elem.city;
	 showcities1.append(p,line)
 	})
   
}
		



// const debounce = (func,delay) =>{
// 	let id;
// 	return function(query){
// 		if(id){
// 			clearTimeout(id);
// 		}
// 		id=setTimeout(function(){
// 			func(query);
// 		},delay)
// 	}
// }

// function fetchItems(query){
// 	console.log(query)
//     var showcities1=document.querySelector("#citynames");
// 	var p1=document.createElement("p");
//     var line1=document.createElement("hr");
// 		for(var i=0;i<city_names.length;i++){
// 		if(query == city_names[i]){
// 	     p1.innerHTML=city_names[i];
//          showcities1.append(p1,line1);
// 		}
	
// }
		
// }

// let betterFetchItems = debounce(fetchItems,500);

// let input = document.getElementById("typesearch");
// input.addEventListener("keyup",function(e){
// 	betterFetchItems(e.target.value);
// })




























    </script>